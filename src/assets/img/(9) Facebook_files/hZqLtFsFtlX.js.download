if (self.CavalryLogger) { CavalryLogger.start_js(["HBlVm"]); }

__d("StoriesContextualReplyBar_suggestions.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"StoriesContextualReplyBar_suggestions",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text_with_entities",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesContextualReplyPill_text"}],storageKey:null}],type:"TextSuggestion",abstractKey:null}],type:"ConversationGuideSuggestion",abstractKey:"__isConversationGuideSuggestion"};e.exports=a}),null);
__d("StoriesContextualReplyPill_text.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesContextualReplyPill_text",selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],type:"TextWithEntities",abstractKey:null};e.exports=a}),null);
__d("LiveProducerUserHoverCard.react",["ActorHovercard.react","CometLink.react","React","TetraText.react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.actorID,d=a.name,e=a.userURL;return g.jsx(b("ActorHovercard.react"),{actorID:c,display:"inline-block",children:function(a){return g.jsx(b("CometLink.react"),{"aria-hidden":!1,href:e,ref:a,children:g.jsx(b("TetraText.react"),{numberOfLines:1,type:"bodyLink2",children:d})})}})}}),null);
__d("StoriesContextualReplyPill.react",["CometEmojiTransform","CometEmoticonTransform","CometPressable.react","CometRelay","CometTextWithEntitiesRelay.react","React","stylex","StoriesContextualReplyPill_text.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j={container:{backgroundColor:"cubx1xtm",borderTopStartRadius:"e72ty7fz",borderTopEndRadius:"qlfml3jp",borderBottomEndRadius:"inkptoze",borderBottomStartRadius:"qmr60zad",height:"tv7at329",justifyContent:"taijpn5t",marginBottom:"n851cfcs"},text:{alignSelf:"o8rfisnq",color:"ljqsnud1",fontFamily:"bl3uatpe",fontSize:"jq4qci2q",fontWeight:"lrazzd5p"}};function a(a){var c=a.id,d=a.onPress,e=a.text,f=a.textWidth;a=a.textWithEntity;a=b("CometRelay").useFragment(g!==void 0?g:g=b("StoriesContextualReplyPill_text.graphql"),a);var k=[b("CometEmoticonTransform")(),b("CometEmojiTransform")()];return i.jsx(b("CometPressable.react"),{onPress:function(){return d(c,e)},style:{width:"calc("+f+"px + 30px)"},xstyle:j.container,children:i.jsx("div",{className:(h||(h=b("stylex")))(j.text),children:i.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:a,transforms:k})})})}}),null);
__d("StoriesContextualReplyBar.react",["CometRelay","DeferredDraftEditor.react","EditorState","EmojiInputDecorator","EmojiSpan.react","React","SelectionState","StoriesContextualReplyPill.react","StoriesFeedbackEditorStateContext","StoriesLoggerContext","StoriesSuspensePauseOnHoverContainer.react","getPlainTextFromDeferredDraftEditorState","stylex","useStoriesViewerBaseDimensions","StoriesContextualReplyBar_suggestions.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=10,j=30;function a(a){a=a.guideSuggestionsData;var c=h.useRef(!1);a=b("CometRelay").useFragment(g!==void 0?g:g=b("StoriesContextualReplyBar_suggestions.graphql"),a);var d=h.useContext(b("StoriesFeedbackEditorStateContext")),e=d.contextualReplyRef,f=d.editorState,k=d.onFocus,l=d.setContextualReplyTapped,m=d.setEditorState,n=d.setMostRecentTappedID;d=h.useContext(b("StoriesLoggerContext"));var o=d.logger,p=a==null?void 0:a.map(function(a){if(a.id!=null&&a.text!=null&&a.text_with_entities!=null){var b=a.id,c=a.text;a=a.text_with_entities;return{id:b,text:c,textWithEntity:a}}return null}).filter(Boolean),q=h.useCallback(function(a,c){var d=b("getPlainTextFromDeferredDraftEditorState")(f).trim();d=d.length===0?c:d+" "+c;c=new(b("EmojiInputDecorator"))(b("EmojiSpan.react"),null,{size:16});c=b("EditorState").createWithText(d,c);var e=c.getSelection();e=new(b("SelectionState"))({anchorKey:e.getAnchorKey(),anchorOffset:d.length,focusKey:e.getFocusKey(),focusOffset:d.length,hasFocus:!0,isBackward:!1});m({__type:b("DeferredDraftEditor.react").EDITOR_STATE,draftEditorState:b("EditorState").forceSelection(c,e)});k();l(!0);n(a)},[f,k,m,l,n]),r=b("useStoriesViewerBaseDimensions")().width-j,s=7.5;d=h.useMemo(function(){var a=r,c=[],d=[],e=[];if(p==null)return{pills:c,smartReplyIDList:d,smartReplyTextList:e};var f=0;while(f<p.length&&p[f].text.length*s+j<=a){var g=p[f].text,k=g.length*s,l=p[f].id;c.push(h.jsx("div",{className:"qnrpqo6b jxrgncrl",children:h.jsx(b("StoriesSuspensePauseOnHoverContainer.react"),{children:h.jsx(b("StoriesContextualReplyPill.react"),{id:l,onPress:q,text:g,textWidth:k,textWithEntity:p[f].textWithEntity})})},p[f].id));d.push(l);e.push(g);a=a-k-j-i;f+=1}return{pills:c,smartReplyIDList:d,smartReplyTextList:e}},[p,r,q]);a=d.pills;var t=d.smartReplyIDList,u=d.smartReplyTextList;h.useEffect(function(){c.current===!1&&(o.smartReplyImpressionLog(t,u),c.current=!0)},[o,t,u]);return h.jsx("div",{className:"k4urcfbm taijpn5t btwxx1t3 j83agx80",ref:e,children:a})}}),null);